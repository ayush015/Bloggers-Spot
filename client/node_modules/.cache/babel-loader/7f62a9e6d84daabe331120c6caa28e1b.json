{"ast":null,"code":"var _jsxFileName = \"/Users/as/Desktop/Co-Founder/client/src/routes/NewArticle/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Style from \"./NewArticle.module.css\";\nimport { isAuthenticated } from \"../helper/apicalls\";\nimport { newArticle, postBySlug } from \"./helper/apicall\";\nimport { useParams, Redirect } from \"react-router-dom\";\n\nconst NewArticle = () => {\n  const [post, setPost] = useState({\n    title: \"\",\n    description: \"\",\n    markdown: \"\",\n    user: \"\",\n    redirect: false\n  });\n  const {\n    user: {\n      _id\n    },\n    token\n  } = isAuthenticated();\n  const {\n    title,\n    description,\n    markdown,\n    user,\n    redirect\n  } = post;\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setError(\"\");\n    setPost({ ...post,\n      [name]: value\n    });\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(false);\n    console.log(_id, token);\n    newArticle(_id, token, {\n      title,\n      description,\n      markdown,\n      user: _id\n    }).then(data => {\n      console.log(data);\n\n      if (data.error) {\n        setError(true);\n      } else {\n        setError(\"\");\n        setPost({\n          title: \"\",\n          description: \"\",\n          markdown: \"\",\n          redirect: true\n        });\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const performRedirect = () => {\n    if (redirect) {\n      if (isAuthenticated()) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 16\n          }\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    className: Style.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    required: true,\n    placeholder: \"Title\",\n    value: post.title,\n    name: \"title\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    required: true,\n    placeholder: \"Description\",\n    value: post.description,\n    name: \"description\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    required: true,\n    placeholder: \"Markdown here\",\n    value: post.markdown,\n    name: \"markdown\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onSubmit,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, \"create\")), performRedirect);\n};\n\nexport default NewArticle;","map":{"version":3,"sources":["/Users/as/Desktop/Co-Founder/client/src/routes/NewArticle/index.js"],"names":["React","useState","useEffect","Style","isAuthenticated","newArticle","postBySlug","useParams","Redirect","NewArticle","post","setPost","title","description","markdown","user","redirect","_id","token","error","setError","success","setSuccess","handleChange","e","name","value","target","onSubmit","preventDefault","console","log","then","data","catch","err","performRedirect","form"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Style from \"./NewArticle.module.css\";\nimport { isAuthenticated } from \"../helper/apicalls\";\nimport { newArticle, postBySlug } from \"./helper/apicall\";\nimport { useParams, Redirect } from \"react-router-dom\";\n\nconst NewArticle = () => {\n  const [post, setPost] = useState({\n    title: \"\",\n    description: \"\",\n    markdown: \"\",\n    user: \"\",\n    redirect: false,\n  });\n  const {\n    user: { _id },\n    token,\n  } = isAuthenticated();\n\n  const { title, description, markdown, user, redirect } = post;\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setError(\"\");\n    setPost({\n      ...post,\n      [name]: value,\n    });\n  };\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(false);\n    console.log(_id, token);\n\n    newArticle(_id, token, { title, description, markdown, user: _id })\n      .then((data) => {\n        console.log(data);\n        if (data.error) {\n          setError(true);\n        } else {\n          setError(\"\");\n          setPost({ title: \"\", description: \"\", markdown: \"\", redirect: true });\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n  const performRedirect = () => {\n    if (redirect) {\n      if (isAuthenticated()) {\n        return <Redirect to=\"/\"></Redirect>;\n      }\n    }\n  };\n  return (\n    <form className={Style.form}>\n      {/* <input type=\"text\" required placeholder=\"Url image layout\" name=\"image\" /> */}\n      <input\n        type=\"text\"\n        required\n        placeholder=\"Title\"\n        value={post.title}\n        name=\"title\"\n        onChange={handleChange}\n      />\n      <input\n        type=\"text\"\n        required\n        placeholder=\"Description\"\n        value={post.description}\n        name=\"description\"\n        onChange={handleChange}\n      />\n      <textarea\n        required\n        placeholder=\"Markdown here\"\n        value={post.markdown}\n        name=\"markdown\"\n        onChange={handleChange}\n      />\n      <div>\n        <button>Back</button>\n        <button onClick={onSubmit} type=\"submit\">\n          create\n        </button>\n      </div>\n      {performRedirect}\n    </form>\n  );\n};\n\nexport default NewArticle;\n"]},"metadata":{},"sourceType":"module"}