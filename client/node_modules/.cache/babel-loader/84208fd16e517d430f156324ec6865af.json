{"ast":null,"code":"var _jsxFileName = \"/Users/as/Desktop/Co-Founder/client/src/routes/NewArticle/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Style from \"./NewArticle.module.css\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { isAuthenticated } from \"../helper/apicalls\";\nimport { newArticle } from \"./helper/apicall\";\n\nconst NewArticle = () => {\n  // let history = useHistory();\n  // let { slug } = useParams();\n  // const [editing, setEditing] = useState(false);\n  // const [id, setId] = useState(\"\");\n  // const [article, setArticle] = useState({\n  //   image: \"\",\n  //   title: \"\",\n  //   description: \"\",\n  //   markdown: \"\",\n  // });\n  // useEffect(() => {\n  //   if (slug) {\n  //     getArticleBySlug(slug);\n  //     setEditing(true);\n  //   }\n  // }, [slug]);\n  // const getArticleBySlug = async (slug) => {\n  //   try {\n  //     const res = await axios.get(\n  //       `https://rhodlib-blog.herokuapp.com/api/post/${slug}`\n  //     );\n  //     setArticle(res.data);\n  //     setId(res.data._id);\n  //   } catch (err) {\n  //     console.log({ error: err });\n  //   }\n  // };\n  // const handleInputChange = (event) => {\n  //   const { name, value } = event.target;\n  //   setArticle({ ...article, [name]: value });\n  // };\n  // const onSubmit = async (event) => {\n  //   event.preventDefault();\n  //   if (sessionStorage.token) {\n  //     if (editing) {\n  //       try {\n  //         axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n  //         await axios.put(\n  //           `https://rhodlib-blog.herokuapp.com/api/update/${id}`,\n  //           article\n  //         );\n  //         history.push(`/article/${slug}`);\n  //       } catch (err) {\n  //         console.log({ error: err });\n  //       }\n  //     } else {\n  //       try {\n  //         axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n  //         await axios.post(\n  //           \"https://rhodlib-blog.herokuapp.com/api/new/post\",\n  //           article\n  //         );\n  //         history.push(\"/\");\n  //       } catch (err) {\n  //         console.log({ error: err });\n  //       }\n  //     }\n  //   }\n  // };\n  const [post, setPost] = useState({\n    title: \"\",\n    description: \"\"\n  });\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const {\n    user,\n    token\n  } = isAuthenticated();\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setError(\"\");\n    setPost(prevPost => {\n      return { ...prevPost,\n        [name]: value\n      };\n    });\n  };\n\n  const onSubmit = e => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(false);\n    newArticle(user._id, token, {\n      post\n    }).then(data => {\n      if (data.error) {\n        setError(true);\n      } else {\n        setError(\"\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"form\", {\n    className: Style.form,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    required: true,\n    placeholder: \"Url image layout\",\n    name: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    required: true,\n    placeholder: \"Title\",\n    value: post.title,\n    name: \"title\",\n    onChange: handleChange(\"title\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    required: true,\n    placeholder: \"Description\",\n    value: post.description,\n    name: \"description\",\n    onChange: handleChange(\"description\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    required: true,\n    placeholder: \"Markdown here\",\n    name: \"markdown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, \"Back\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: onSubmit,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, \"create\")));\n};\n\nexport default NewArticle;","map":{"version":3,"sources":["/Users/as/Desktop/Co-Founder/client/src/routes/NewArticle/index.js"],"names":["React","useState","useEffect","axios","Style","useHistory","useParams","isAuthenticated","newArticle","NewArticle","post","setPost","title","description","error","setError","success","setSuccess","user","token","handleChange","e","name","value","target","prevPost","onSubmit","preventDefault","_id","then","data","form"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Style from \"./NewArticle.module.css\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { isAuthenticated } from \"../helper/apicalls\";\nimport { newArticle } from \"./helper/apicall\";\n\nconst NewArticle = () => {\n  // let history = useHistory();\n  // let { slug } = useParams();\n  // const [editing, setEditing] = useState(false);\n  // const [id, setId] = useState(\"\");\n  // const [article, setArticle] = useState({\n  //   image: \"\",\n  //   title: \"\",\n  //   description: \"\",\n  //   markdown: \"\",\n  // });\n\n  // useEffect(() => {\n  //   if (slug) {\n  //     getArticleBySlug(slug);\n  //     setEditing(true);\n  //   }\n  // }, [slug]);\n\n  // const getArticleBySlug = async (slug) => {\n  //   try {\n  //     const res = await axios.get(\n  //       `https://rhodlib-blog.herokuapp.com/api/post/${slug}`\n  //     );\n  //     setArticle(res.data);\n  //     setId(res.data._id);\n  //   } catch (err) {\n  //     console.log({ error: err });\n  //   }\n  // };\n\n  // const handleInputChange = (event) => {\n  //   const { name, value } = event.target;\n  //   setArticle({ ...article, [name]: value });\n  // };\n\n  // const onSubmit = async (event) => {\n  //   event.preventDefault();\n\n  //   if (sessionStorage.token) {\n  //     if (editing) {\n  //       try {\n  //         axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n  //         await axios.put(\n  //           `https://rhodlib-blog.herokuapp.com/api/update/${id}`,\n  //           article\n  //         );\n  //         history.push(`/article/${slug}`);\n  //       } catch (err) {\n  //         console.log({ error: err });\n  //       }\n  //     } else {\n  //       try {\n  //         axios.defaults.headers.common[\"Authorization\"] = sessionStorage.token;\n  //         await axios.post(\n  //           \"https://rhodlib-blog.herokuapp.com/api/new/post\",\n  //           article\n  //         );\n  //         history.push(\"/\");\n  //       } catch (err) {\n  //         console.log({ error: err });\n  //       }\n  //     }\n  //   }\n  // };\n  const [post, setPost] = useState({\n    title: \"\",\n    description: \"\",\n  });\n  const [error, setError] = useState(false);\n  const [success, setSuccess] = useState(false);\n  const { user, token } = isAuthenticated();\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setError(\"\");\n    setPost((prevPost) => {\n      return {\n        ...prevPost,\n        [name]: value,\n      };\n    });\n  };\n  const onSubmit = (e) => {\n    e.preventDefault();\n    setError(\"\");\n    setSuccess(false);\n\n    newArticle(user._id, token, { post }).then((data) => {\n      if (data.error) {\n        setError(true);\n      } else {\n        setError(\"\");\n      }\n    });\n  };\n\n  return (\n    <form className={Style.form}>\n      <input type=\"text\" required placeholder=\"Url image layout\" name=\"image\" />\n      <input\n        type=\"text\"\n        required\n        placeholder=\"Title\"\n        value={post.title}\n        name=\"title\"\n        onChange={handleChange(\"title\")}\n      />\n      <input\n        type=\"text\"\n        required\n        placeholder=\"Description\"\n        value={post.description}\n        name=\"description\"\n        onChange={handleChange(\"description\")}\n      />\n      <textarea required placeholder=\"Markdown here\" name=\"markdown\" />\n      <div>\n        <button>Back</button>\n        <button onClick={onSubmit} type=\"submit\">\n          create\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default NewArticle;\n"]},"metadata":{},"sourceType":"module"}